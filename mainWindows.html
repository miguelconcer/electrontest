<!DOCTYPE html>
<html lang="en">
<head>
    <title>Asinbot Desktop App</title>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/helio.css">
</head>

<script>
    const ipcRenderer = require('electron').ipcRenderer;
    // wait for an updateReady message
    ipcRenderer.on('updateReady', function(event, text) {
        // changes the text of the button
        /*var container = document.getElementById('ready');
        container.innerHTML = "new version ready!";*/
        //Manage update stuff
    })
</script>

<body class="grey lighten-4">

  <!-- Insert this line above script imports  -->
  <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>

  <script src="asinbot.js" type="text/javascript"></script>

  <script
      src="https://code.jquery.com/jquery-3.2.1.js"
      integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
      crossorigin="anonymous">
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>

  <script>if (window.module) module = window.module;</script>

  <ul id="slide-out" class="side-nav fixed ">

    <li><div class="user-view ">
      <a href="#!user"><img class="circle" src="logo/heliosIcon_1024px.png_64x64.png"></a>
      <a href="#!wiki"><span class="name grey-text">Asinbot wiki</span></a>
    </div></li>
    <li><div class="divider"></div></li>

    <ul class="section table-of-contents">
                <li><a href="#grid-dashboard">Dashboard</a></li>
                <li><a href="#grid-availability">Instock tools</a></li>
                <li><a href="#grid-pricing">Pricing tools</a></li>
                <li><a href="#grid-IDQ">IDQ</a></li>
    </ul>

    <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a>
    <li><div class="divider"></div></li>
    <li>
      <a href="#!">
        <select class="icons">
          <!-- class="circle" with square country flags  -->
          <option value="" data-icon="assets/flags/ES.png" selected>ES</option>
          <option value="" data-icon="assets/flags/IT.png" >IT</option>
          <option value="" data-icon="assets/flags/FR.png" disabled>FR</option>
          <option value="" data-icon="assets/flags/DE.png" disabled>DE</option>
          <option value="" data-icon="assets/flags/UK.png" disabled>UK</option>
        </select>
      </a>
    </li>


    <div class="patreon-ad grey-text text-lighten-1 valign-wrapper">
      Developed with ❤ by migueras@
    </div>

  </ul>

<header>

  <div class="preloader-background">
    <div class="preloader-wrapper big active">
        <div class="spinner-layer spinner-blue-only">
            <div class="circle-clipper left">
                <div class="circle"></div>
            </div>
            <div class="gap-patch">
                <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
                <div class="circle"></div>
            </div>
        </div>
    </div>
  </div>

<div class="navbar-fixed asinSearchNavBar">
  <nav class="asinSearchNavBar">
      <div class="nav-wrapper blue darken-1">
         <form name="search_form_name" id="search_form">
           <div class="input-field">
             <input id="search" type="search" required placeholder="Insert ASIN">
             <i class="material-icons">clear</i>
           </div>
         </form>
     </div>
  </nav>

</div>

</header>

<main>

</br>



<div id="grid-dashboard" class="scrollspy">

<div class="row">


<!-- ASIN PRESENTATION AND PRICING -->


    <div class="col s12 m12">
      <div class="card horizontal">
        <div class="card-image">
          <img class="asin_img_pad" id="asin_image" src="">
        </div>
        <div class="card-stacked">
          <div class="card-content">
            <div class="col s12 m6">
              <span id="asin_title" class="card-title">Title</span>
              <a class="waves-effect waves-light btn tooltipped" data-position="bottom" data-delay="50" data-tooltip="CTRL+ALT+J">Detail page</a>
            </div>
            <div class="col s12 m3">
              <div class="collection">
               <a href="#!" class="collection-item blue lighten-5"><span id="asin_netInventory" class="badge">N/A</span>Stock</a>
               <a href="#!" class="collection-item"><span id="asin_vendor_code_sourcing" class="badge">N/A</span>Vendor</a>
             </div>
            </div>
            <div class="col s12 m3">
              <div class="collection">
               <a href="#!" class="collection-item"><span id="asin_publishedPrice" class="badge">N/A</span>Price</a>
               <a href="#!" class="collection-item"><span id="asin_FLcost" class="badge">N/A</span>FL Cost</a>
               <a href="#!" class="collection-item teal lighten-5"><span id="asin_cp" class="badge">N/A</span>FL CP</a>
             </div>
            </div>
          </div>
        </div>

      </div>
    </div>



<!-- End of ROW -->
</div>

<!-- End of dashboard grid -->
</div>



<div id="grid-availability" class="scrollspy">

<div id="card-stats">
    <div class="row">
        <div class="col s2 m2 l2">
          <a class="waves-effect waves-light btn-large amber darken-2 modal-trigger" href="#modal_Alaska"><i class="material-icons left">home</i>Alaska</a>
        </div>
        <div class="col s2 m2 l2">
          <a class="waves-effect waves-light btn-large  light-blue darken-3 modal-trigger" href="#modal_Asinstat"><i class="material-icons left">assignment</i>Asinstat</a>
        </div>
        <div class="col s2 m2 l2">
          <a class="waves-effect waves-light btn-large deep-orange darken-1 modal-trigger" href="#modal_Costs"><i class="material-icons left">attach_money</i>Costs</a>
        </div>
        <div class="col s2 m2 l2">
          <a class="waves-effect waves-light btn-large green darken-1 modal-trigger" href="#modal_Plan"><i class="material-icons left">autorenew</i>Plan</a>
        </div>
        <div class="col s2 m2 l2">
          <a class="waves-effect waves-light btn-large  grey darken-1 modal-trigger" href="#modal_BIW"><i class="material-icons left">block</i>BIW</a>
        </div>
        <div class="col s2 m2 l2">
          <a class="waves-effect waves-light btn-large cyan darken-1 modal-trigger" href="#modal_Forecast"><i class="material-icons left">equalizer</i>Forec.</a>
        </div>
    </div>
</div>

<!-- ...................................................................Modal Structure................................................. -->

<!-- ASINSTAT -->
<div id="modal_Asinstat" class="modal modal-fixed-footer">
  <div class="modal-content">
    <h4>Asinstat</h4>
    <iframe id="asinstatFrame" frameborder="0" framespacing="0" marginheight="0" marginwidth="0" vspace="0" hspace="0" width="1000" height="300" border="0" src ="">
        <p>Your browser does not support iframes.</p>
    </iframe>
  </div>
  <div class="modal-footer" id="modal_Asinstat_footer">
    <a id="backFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Back</a>
    <a id="forwardFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Forward</a>
    <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>


<!-- ALASKA -->
<div id="modal_Alaska" class="modal modal-fixed-footer">
  <div class="modal-content">
    <h4>Alaska</h4>
    <iframe id="alaskaFrame" frameborder="0" framespacing="0" marginheight="0" marginwidth="0" vspace="0" hspace="0" width="1000" height="300" border="0" src ="">
        <p>Your browser does not support iframes.</p>
    </iframe>
  </div>
  <div class="modal-footer" id="modal_Alaska_footer">
    <a id="backFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Back</a>
    <a id="forwardFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Forward</a>
    <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>

<!-- COSTS -->
<div id="modal_Costs" class="modal modal-fixed-footer">
  <div class="modal-content">
    <h4>Costs</h4>
    <iframe id="costFrame" frameborder="0" framespacing="0" marginheight="0" marginwidth="0" vspace="0" hspace="0" width="1000" height="300" border="0" src ="">
        <p>Your browser does not support iframes.</p>
    </iframe>
  </div>
  <div class="modal-footer" id="modal_Costs_footer">
    <a id="backFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Back</a>
    <a id="forwardFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Forward</a>
    <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>

<!-- PLAN -->
<div id="modal_Plan" class="modal modal-fixed-footer">
  <div class="modal-content">
    <h4>Asin Plan Preview</h4>
    <iframe id="planFrame" frameborder="0" framespacing="0" marginheight="0" marginwidth="0" vspace="0" hspace="0" width="1000" height="300" border="0" src ="">
        <p>Your browser does not support iframes.</p>
    </iframe>
  </div>
  <div class="modal-footer" id="modal_Plan_footer">
    <a id="backFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Back</a>
    <a id="forwardFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Forward</a>
    <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>

<!-- BIW -->
<div id="modal_BIW" class="modal modal-fixed-footer">
  <div class="modal-content">
    <h4>BIW</h4>
    <iframe id="BIWFrame" frameborder="0" framespacing="0" marginheight="0" marginwidth="0" vspace="0" hspace="0" width="1000" height="300" border="0" src ="">
        <p>Your browser does not support iframes.</p>
    </iframe>
  </div>
  <div class="modal-footer" id="modal_BIW_footer">
    <a id="backFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Back</a>
    <a id="forwardFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Forward</a>
    <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>

<!-- FORECAST -->
<div id="modal_Forecast" class="modal modal-fixed-footer">
  <div class="modal-content">
    <h4>Forecast</h4>
    <iframe id="forecastFrame" frameborder="0" framespacing="0" marginheight="0" marginwidth="0" vspace="0" hspace="0" width="1000" height="300" border="0" src ="">
        <p>Your browser does not support iframes.</p>
    </iframe>
  </div>
  <div class="modal-footer" id="modal_Forecast_footer">
    <a id="backFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Back</a>
    <a id="forwardFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Forward</a>
    <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>


<!-- ...................................................................End Modal Structure................................................. -->


<div class="row">

      <div class="col s12 m12">
        <div class="card horizontal">
          <div class="card-stacked">
            <div class="card-content">
              <div class="col s12 m6">
                <span class="card-title">Key attributes</span>
                <div class="col s12 m6">
                  <div class="collection">
                   <a href="#!" class="collection-item blue lighten-5"><span id="asin_repCat" class="badge">N/A</span>Rep. Cat.</a>
                   <a href="#!" class="collection-item"><span id="asin_lifecycle" class="badge">N/A</span>Lifecycle</a>
                 </div>
                </div>
                <div class="col s12 m6">
                  <div class="collection">
                   <a href="#!" class="collection-item"><span id="asin_IPQ" class="badge">N/A</span>IPQ</a>
                   <a href="#!" class="collection-item"><span id="asin_IBQ" class="badge">N/A</span>IBQ</a>
                 </div>
                </div>
              </div>

              <div class="col s12 m6">
                <span id="asin_title" class="card-title">EAN(s)</span>
                <div id="EANs_chips" class="col s12 m12">
                  <div class="chip">
                    <p id="asin_EANs">EAN code</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

</div>



<div class="row">
    <div class="col s12">
      <a class="waves-effect waves-light btn-large grey darken-1 modal-trigger" href="#modal_Tickets"><i class="material-icons left">assignment_late</i>Check ASIN tickets</a>
    </div>
</div>


<!-- ...................................................................Modal Structure................................................. -->


<!-- FORECAST -->
<div id="modal_Tickets" class="modal modal-fixed-footer">
  <div class="modal-content">
    <h4>Alaska</h4>
    <iframe id="ticketsFrame" frameborder="0" framespacing="0" marginheight="0" marginwidth="0" vspace="0" hspace="0" width="1000" height="300" border="0" src ="">
        <p>Your browser does not support iframes.</p>
    </iframe>
  </div>
  <div class="modal-footer" id="modal_Tickets_footer">
    <a id="backFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Back</a>
    <a id="forwardFooterBtn" href="#!" class="modal-action waves-effect waves-green btn-flat left">Forward</a>
    <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>

<!-- ...................................................................End Modal Structure................................................. -->


</div>




<div id="grid-pricing" class="scrollspy">

  <div class="row">
    <div class="col s12 m12">
      <div class="card horizontal">
        <div class="card-stacked">
          <div class="card-content">
            <div class="col s12 m6">

              <span class="card-title">Pricing rules</span>
            </br>
              <a class="waves-effect waves-light btn tooltipped" data-position="bottom" data-delay="50" data-tooltip="CTRL+ALT+P">Pricing rules</a>
            </br></br>
              <a class="waves-effect waves-light btn tooltipped light-blue darken-3" data-position="bottom" data-delay="50" data-tooltip="CTRL+ALT+TBDF">CMT Detail Page</a>

            </div>

            <div class="col s12 m3">
              <img class="asin_img_pad" id="asin_image_keepa" src="">
            </div>


          </div>
        </div>
      </div>
    </div>
  </div>

</div>



<div id="grid-IDQ" class="scrollspy">

  <div class="row">
    <div class="col s12 m12">
      <div class="card horizontal">
        <div class="card-stacked">
          <div class="card-content">
            <div class="col s12 m6">

              <span class="card-title">IDQ infromation</span>
            </br>
              <a class="waves-effect waves-light btn tooltipped" data-position="bottom" data-delay="50" data-tooltip="CTRL+ALT+P">Pricing rules</a>
            </br></br>
              <a class="waves-effect waves-light btn tooltipped light-blue darken-3" data-position="bottom" data-delay="50" data-tooltip="CTRL+ALT+TBDF">CMT Detail Page</a>

            </div>

            <div class="col s12 m3">
              <img class="asin_img_pad" id="asin_image_keepa" src="">
            </div>


          </div>
        </div>
      </div>
    </div>
  </div>

</div>



  </main>


  <div class="fixed-action-btn">
   <a class="btn-floating btn-large red">
     <i class="large material-icons">visibility</i>
   </a>

   <ul>
     <li><a class="btn-floating green tooltipped modal-trigger" data-position="left" data-delay="50" data-tooltip="View Asinstat" href="#modal1"><i class="material-icons">search</i></a></li>
     <li><a class="btn-floating blue tooltipped modal-trigger" data-position="left" data-delay="50" data-tooltip="View Alaska" href="#modal2"><i class="material-icons">move_to_inbox</i></a></li>
     <li><a class="btn-floating blue tooltipped modal-trigger" data-position="left" data-delay="50" data-tooltip="Feedback" href="#modalFeedback"><i class="material-icons">send</i></a></li>
   </ul>
 </div>


 <!-- Modal Trigger -->
 <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a>

 <!-- Modal Structure -->
 <div id="modalFeedback" class="modal bottom-sheet">
   <div class="modal-content">

     <form class="col s12">
         <div class="row">
           <div class="input-field col s6">
             <i class="material-icons prefix">flag</i>
             <textarea id="textarea1" class="materialize-textarea " data-length="120"></textarea>
             <label for="textarea1">Send us your feedback! ¯\_(ツ)_/¯</label>
           </div>


           <div class="input-field col s6">
             <select>
               <option value="" disabled selected>Do you like asinbot? </option>
               <option value="1"><i class="material-icons">thumb_up</i></option>
               <option value="2"><i class="material-icons">thumb_down</i></option>
             </select>
             <label>Materialize Select</label>
           </div>

         </div>
     </form>

   </div>
   <div class="modal-footer">
     <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat left">Cancel</a>
     <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Send Feedback</a>
   </div>
 </div>

<!-- <ul></ul> -->



</body>

<script>


  $("#search_form").on('submit', function (e) {
   //ajax call here

   $('.preloader').show();
   $('.preloader-wrapper').show();
   $('.preloader-background').show();

   downloadASINInformation();

   $('.preloader').delay(350).fadeOut('slow');
   $('.preloader-wrapper').delay(350).fadeOut();
   $('.preloader-background').delay(350).fadeOut();
   //stop form submission
    e.preventDefault();
  });

  $(document).ready(function() {

    $('.preloader').delay(350).fadeOut('slow');
    $('.preloader-wrapper').delay(350).fadeOut();
    $('.preloader-background').delay(350).fadeOut();
    //configuration of the sidepanel
    $('.button-collapse').sideNav({
        menuWidth: 180, // Default is 240
        edge: 'left', // Choose the horizontal origin
        closeOnClick: true // Closes side-nav on <a> clicks, useful for Angular/Meteor
      }
    );

    $('.collapsible').collapsible();
    $('.modal').modal();
    $('.tooltipped').tooltip({delay: 50});

    $('.scrollspy').scrollSpy({
      scrollOffset: 65
    });

    $('select').material_select();

    $("#backFooterBtn").click(function () {

      var button_id = $("#backFooterBtn").closest("div").prop("id");
      console.log("Aqui va el id del botton:");
      console.log(button_id);

      if (button_id="modal_Asinstat_footer") {
        var h = document.getElementById("alaskaFrame").contentWindow.history;
        h.back();
      }else if (button_id="modal_Asinstat_footer") {
        var h = document.getElementById("asinstatFrame").contentWindow.history;
        h.back();
      }else if (button_id="modal_Tickets_footer") {
        var h = document.getElementById("ticketsFrame").contentWindow.history;
        h.back();
      }else if (button_id="modal_BIW_footer") {
        var h = document.getElementById("BIWFrame").contentWindow.history;
        h.back();
      }


    });

    $("#forwardButtonIPC").click(function () {

        var button_id = $("#forwardFooterBtn").closest("div").prop("id");
        console.log("Aqui va el id del botton:");
        console.log(button_id);

        if (button_id="modal_Asinstat_footer") {
          var h = document.getElementById("alaskaFrame").contentWindow.history;
          h.forward();
        }else if (button_id="modal_Alaska_footer") {
          var h = document.getElementById("asinstatFrame").contentWindow.history;
          h.forward();
        }else if (button_id="modal_Tickets_footer") {
          var h = document.getElementById("ticketsFrame").contentWindow.history;
          h.forward();
        }else if (button_id="modal_BIW_footer") {
          var h = document.getElementById("BIWFrame").contentWindow.history;
          h.forward();
        }


    });


    //If BIW -> Show message probably user needs to reload.
    $('.modal').modal({
     dismissible: true, // Modal can be dismissed by clicking outside of the modal
     opacity: .5, // Opacity of modal background
     inDuration: 300, // Transition in duration
     outDuration: 200, // Transition out duration
     startingTop: '4%', // Starting top style attribute
     endingTop: '10%', // Ending top style attribute
     ready: function(modal, trigger) { // Callback for Modal open. Modal and trigger parameters available.

       var $toastContent = $('<span>You can reload this view with CTRL+ALT+SPACE</span>').add($('<button class="btn-flat toast-action">PRO TIP</button>'));
       Materialize.toast($toastContent, 2500,'rounded');
      // Materialize.toast('[Help] If the quickview is not working properly, please try again by doing CTRL+ALT+SPACE', 6000);

     }
   }
 );

    //configuration of the search form. ACTION.
    $("#asdf").submit(function() {});
  });

</script>

<script>
  const electron = require('electron');
  const {ipcRenderer} = electron;
  const form = document.querySelector('form');

  form.addEventListener('submit', submitForm);

  ipcRenderer.on('mainWindow', (e,data) => {
    //e.preventDefault();
    console.log("hello!!!");
    console.log(data);

    document.getElementById('search').value=data;
    $("#search_form").submit();
  });

  function submitForm(e){
    e.preventDefault();
    const item = document.querySelector('#search').value;
    console.log(item);
    console.log("Prevent default triggered.");
    ipcRenderer.send('search:add', item);
  }
</script>




</html>
